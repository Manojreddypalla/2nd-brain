# Lab Network Architecture — Simple, Safe, and Attack-Ready

Here’s a short, blog-style writeup of the lab’s network architecture so you can quickly understand how the pieces fit together and how you’ll use them while learning offensive techniques.

---

## The idea in one line

The lab emulates a tiny internet for a fake hosting company (ACME Infinity Servers) using **two isolated Docker networks** — a _public_ network that hosts internet-facing services and a _corporate_ network that holds private backend systems. Kali sits in the middle with interfaces to both networks so you can attack from outside and pivot inward.

---

## The two networks

- **Public network (172.16.10.0/24)** — The “internet-facing” side. This is where ACME’s customer-facing services live (websites, FTP). These are your likely initial entry points.
    - Hosts: `p-web-01`, `p-web-02`, `p-ftp-01`, (plus Kali’s public interface 172.16.10.1)
    - Hostnames: `p-web-01.acme-infinity-servers.com`, etc.
- **Corporate network (10.1.0.0/24)** — The private backend where databases, caches, backups, and internal tooling live. No direct internet — only reachable after pivoting from the public network.
    - Hosts: `c-jumpbox-01`, `c-redis-01`, `c-db-01`, `c-db-02` (and Kali’s corporate interface 10.1.0.1)

Kali has two bridge interfaces, usually named `br_public` and `br_corporate`, which connect it to the two networks.

---

## Why two networks?

This separation models a real-world environment:

- Public-facing systems are attacked first.
- If you compromise a public system, you can use it as a **pivot** (jumpbox) to reach the corporate/private systems.
- It forces you to practice reconnaissance, lateral movement, and privilege escalation in a realistic multi-tier architecture.

---

## Naming convention (easy to read)

The container/machine names are purposely descriptive:

- First letter: `p-` = public network, `c-` = corporate network
- Next part: role/technology (`web`, `ftp`, `db`, `redis`, `jumpbox`, `backup`)
- Suffix: number (`01`, `02`) to distinguish duplicates

Examples:

- `p-web-01` → public web server #1
- `c-db-02` → corporate database #2

---

## Quick map (ASCII)

```
            Public network (172.16.10.0/24)
  [Kali br_public: 172.16.10.1] ----- p-web-01 (172.16.10.10)
                                      p-web-02 (172.16.10.11)
                                      p-ftp-01 (172.16.10.12)
                                      p-other...

            Corporate network (10.1.0.0/24)
  [Kali br_corporate: 10.1.0.1] ----- c-jumpbox-01 (10.1.0.11)
                                      c-redis-01 (10.1.0.12)
                                      c-db-01 (10.1.0.15)
                                      c-db-02 (10.1.0.16)

```

---

## Useful commands (run in Kali)

- Check Kali bridge interfaces and addresses:

```bash
ip addr | grep "br_"

```

You should see `br_public` with `172.16.10.1/24` and `br_corporate` with `10.1.0.1/24`.

- List running lab containers (names often match the machines above):

```bash
docker ps --format "{{.Names}}\\t{{.Status}}"

```

- Find a container’s IP from Docker:

```bash
docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' p-web-01

```

---

## Testing & attacker workflow (how you’ll use it)

1. Start by scanning the **public network** (172.16.10.0/24) to find open services (web, ftp).
2. Attack or exploit a vulnerable public host (e.g., `p-web-01`).
3. If successful, use that host as a **pivot** (SSH, reverse shell, tunneling) to reach the corporate network (10.1.0.0/24).
4. Target backend services (`c-db-01`, `c-redis-01`) once you have a route/presence on the internal network.

---

## Practical tips & caveats

- Kali’s IPs (172.16.10.1 / 10.1.0.1) will show up in scans and logs — that’s expected. Don’t confuse Kali with target hosts.
- The corporate network is intentionally **not** internet-accessible — practice lateral movement to reach it.
- Keep the lab isolated (bridge mode inside Docker is fine) — don’t map these networks to your physical LAN or public IPs.

---

## Final thought

This two-network design gives you a compact but realistic playground: initial reconnaissance → exploitation of public assets → lateral movement into a protected internal network. It forces you to practice the whole lifecycle of a penetration test in a safe, repeatable environment.

Want a printable cheat-sheet with IPs and container names, or a quick `nmap` command list to start scanning the public network? I can drop that next.