
# Build a Safe, Local Hacking Lab — A Quick Guide (Kali + Docker)

Want a private playground where you can learn real offensive skills without touching the internet? Here’s a short, friendly blog-style walk-through to get a contained hacking lab running on Kali using Docker. Read it with a coffee — then copy the commands and get your hands dirty.

---

## Why a local hacking lab?

Because practice beats theory. A local lab gives you:

- **A safe space** to break stuff intentionally (no legal / ethical headaches).
- **Repeatable targets** (snapshots restore clean states).
- **A realistic mock environment** with web servers, DBs, FTP, and other services — all vulnerable by design.

Think of it like a driving school: the lab is your closed course, Kali is the instructor’s car, and Docker are the traffic cones you can move around and crash into as many times as you want.

---

## What you’ll run it on

Minimum recommended Kali VM specs:

- 4 GB RAM (8 GB is nicer)
    
- 40 GB disk
    
- Internet access only for setup (prefer NAT/host-only)
    
    Run Kali inside your hypervisor (VMware / VirtualBox) — never on your host OS directly.
    

---

## The high-level plan

1. Install Kali in a VM.
2. Update Kali packages and set bash as default shell.
3. Install Docker + Docker Compose.
4. Clone the Black-Hat-Bash lab repo.
5. Use `make` to deploy the lab containers.
6. Snapshot, poke, learn, restore.

---

## Quick commands (copy → paste)

Open a terminal in Kali and run these (one by one):

```bash
# update Kali
sudo apt update -y
sudo apt upgrade -y
sudo apt dist-upgrade -y

# make bash default for the kali user
sudo usermod --shell /bin/bash kali
su - kali

# add Docker repo and key (Debian/Bullseye example)
printf '%s\\n' "deb <https://download.docker.com/linux/debian> bullseye stable" | sudo tee /etc/apt/sources.list.d/docker-ce.list
curl -fsSL <https://download.docker.com/linux/debian/gpg> | sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/docker-ce-archive-keyring.gpg
sudo apt update -y
sudo apt install docker-ce docker-ce-cli containerd.io -y

# enable docker service now and on boot
sudo systemctl enable docker --now

# allow docker commands without sudo (log out and back in afterwards)
sudo usermod -aG docker $USER

# clone the lab repo
cd ~
git clone <https://github.com/dolevf/Black-Hat-Bash.git>
cd Black-Hat-Bash/lab

# first-time (full) setup (may take a while)
sudo make init

# to bring the lab up later
sudo make deploy

# check lab status
sudo make test
sudo docker ps --format "{{.Names}}"

```

---

## What the repo does

The `Black-Hat-Bash` repo contains Docker Compose configs and scripts that build an isolated mini-internet:

- web servers
    
- databases
    
- FTP services
    
- a jumpbox container for attacker simulations
    
    `make init` builds everything (images + tools). `make deploy` starts the containers. `make teardown` stops them.
    

---

## Docker cheat-sheet (lab-focused)

- `docker ps` — list running containers
- `docker ps -a` — list all containers
- `docker logs -f <name>` — stream logs for a container
- `docker exec -it <name> bash` — open a shell inside a container
- `docker compose up -d` — start compose services (repo dir)
- `docker compose down` — stop compose services

Pro tip: `docker logs` is your first stop when something misbehaves.

---

## Safety rules (read these)

- **Never** expose lab services to the public internet. Use NAT or host-only networking in the VM settings.
- Snapshot your VM before big experiments — snapshots are lifesavers.
- Keep the lab VM isolated from your personal files. Treat it disposable.
- If you need internet for downloads, enable it only temporarily, then disable or firewall the VM.

---

## Typical workflow (one session)

1. `sudo make deploy` — start lab.
2. `docker ps` — see services.
3. `docker exec -it p-web-01 bash` — jump into a target web container.
4. Run your exploit/script from Kali against the container’s internal IP.
5. If you break the target, `sudo make teardown` and `sudo make deploy` (or restore snapshot).

It’s like resetting the arcade after you beat the boss.

---

## Troubleshooting (fast)

- Docker service down: `sudo systemctl status docker` & `sudo journalctl -u docker -n 200`.
- Permission issues with docker: log out & log in after adding to `docker` group, or `newgrp docker`.
- Deploy hang: `tail -f /var/log/lab-install.log` to see progress.
- Container error: `docker logs <name>` — read the message!

---

## Final thoughts

A local Kali + Docker lab is one of the best ways to learn offensive security without crossing lines. Start simple, read the Docker Compose files to see how services talk to each other, and snapshot often. Manual setup teaches more than automation — but when you want to focus on exploitation instead of setup, `make init` is there to save time.

Want a short `docker-compose.yml` for a tiny vulnerable web+db pair to get started immediately? I’ll drop one in your terminal-ready form — say the word.