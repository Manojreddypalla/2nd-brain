# MySQL overview

**`links for similar topics for reference`** 

[DB ](https://www.notion.so/DB-2708f4fd38e780399f59ff8ed4e28f1f?pvs=21) 

## ðŸ”¹ 1. Basics

- **DBMS vs RDBMS**
    - DBMS: general database, no strict structure.
    - RDBMS: relational, tables + relations, supports SQL, ACID.
- **Database Terms**
    - Database â†’ collection of tables.
    - Table â†’ rows & columns.
    - Schema â†’ structure (definition of tables, relationships).
    - Instance â†’ actual data at a given time.
- **ACID Properties**
    - Atomicity â†’ all or nothing.
    - Consistency â†’ valid state before & after transaction.
    - Isolation â†’ transactions donâ€™t interfere.
    - Durability â†’ data survives crashes.

---

## ðŸ”¹ 2. SQL Commands

### DDL (Data Definition Language)

```sql
CREATE DATABASE college;
DROP DATABASE college;
CREATE TABLE students(id INT, name VARCHAR(50));
ALTER TABLE students ADD COLUMN age INT;
DROP TABLE students;

```

### DML (Data Manipulation Language)

```sql
INSERT INTO students VALUES(1,'Manoj',20);
UPDATE students SET age=21 WHERE id=1;
DELETE FROM students WHERE id=1;

```

### DQL (Data Query Language)

```sql
SELECT * FROM students;
SELECT name, age FROM students WHERE age>20 ORDER BY age DESC;

```

### DCL (Data Control Language)

```sql
GRANT SELECT ON college.* TO 'user'@'localhost';
REVOKE SELECT ON college.* FROM 'user'@'localhost';

```

### TCL (Transaction Control Language)

```sql
START TRANSACTION;
INSERT INTO students VALUES(2,'Ravi',22);
ROLLBACK;   -- undo
COMMIT;     -- save
SAVEPOINT sp1;

```

---

## ðŸ”¹ 3. Constraints

- `NOT NULL` â†’ no null values.
- `UNIQUE` â†’ all values must be different.
- `PRIMARY KEY` â†’ unique + not null.
- `AUTO_INCREMENT` â†’ automatically increments integers.
- `FOREIGN KEY` â†’ references another table.
- `DEFAULT` â†’ set a default value.
- `CHECK` â†’ condition on values.

Example:

```sql
CREATE TABLE students(
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  age INT CHECK (age > 15),
  course_id INT,
  FOREIGN KEY (course_id) REFERENCES courses(id)
);

```

---

## ðŸ”¹ 4. Filtering & Sorting

```sql
SELECT * FROM students WHERE age > 18;
SELECT * FROM students WHERE name LIKE 'M%';
SELECT * FROM students WHERE age BETWEEN 18 AND 25;
SELECT * FROM students ORDER BY age DESC LIMIT 5;

```

---

## ðŸ”¹ 5. Aggregation

```sql
SELECT COUNT(*) FROM students;
SELECT AVG(age) FROM students;
SELECT course_id, COUNT(*) FROM students GROUP BY course_id;
SELECT course_id, COUNT(*) FROM students GROUP BY course_id HAVING COUNT(*) > 5;

```

---

## ðŸ”¹ 6. Joins

```sql
-- Inner Join
SELECT s.name, c.title
FROM students s
INNER JOIN courses c ON s.course_id = c.id;

-- Left Join
SELECT s.name, c.title
FROM students s
LEFT JOIN courses c ON s.course_id = c.id;

-- Right Join
SELECT s.name, c.title
FROM students s
RIGHT JOIN courses c ON s.course_id = c.id;

```

---

## ðŸ”¹ 7. Subqueries

```sql
-- Students older than avg age
SELECT * FROM students
WHERE age > (SELECT AVG(age) FROM students);

-- Courses with no enrollments
SELECT * FROM courses
WHERE id NOT IN (SELECT DISTINCT course_id FROM students);

```

---

## ðŸ”¹ 8. Views

```sql
CREATE VIEW young_students AS
SELECT * FROM students WHERE age < 20;

SELECT * FROM young_students;
DROP VIEW young_students;

```

---

## ðŸ”¹ 9. Indexes

```sql
CREATE INDEX idx_name ON students(name);
DROP INDEX idx_name ON students;

```

---

## ðŸ”¹ 10. Stored Procedures & Functions

```sql
DELIMITER //
CREATE PROCEDURE GetAllStudents()
BEGIN
  SELECT * FROM students;
END //
DELIMITER ;

CALL GetAllStudents();

```

---

## ðŸ”¹ 11. Triggers

```sql
CREATE TRIGGER before_insert_student
BEFORE INSERT ON students
FOR EACH ROW
SET NEW.age = IFNULL(NEW.age,18);

```

---

## ðŸ”¹ 12. Transactions

```sql
START TRANSACTION;
UPDATE accounts SET balance = balance - 500 WHERE id=1;
UPDATE accounts SET balance = balance + 500 WHERE id=2;
COMMIT;

```

---

## ðŸ”¹ 13. Normalization

- **1NF**: Atomic values, no repeating groups.
- **2NF**: No partial dependency (PK must determine all columns).
- **3NF**: No transitive dependency (non-key depends only on PK).
- **BCNF**: Stronger form of 3NF.

---

## ðŸ”¹ 14. Common Interview Queries

- Find 2nd highest salary:
    
    ```sql
    SELECT MAX(salary) FROM employees
    WHERE salary < (SELECT MAX(salary) FROM employees);
    
    ```
    
- Find duplicates:
    
    ```sql
    SELECT name, COUNT(*)
    FROM students
    GROUP BY name HAVING COUNT(*) > 1;
    
    ```
    
- Top N salaries:
    
    ```sql
    SELECT * FROM employees ORDER BY salary DESC LIMIT 5;
    
    ```