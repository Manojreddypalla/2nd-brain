# MongoDB overview

# ðŸ“˜ MongoDB Full Notes

## 1. Basics

- **What is MongoDB?**
    - A **NoSQL**, document-oriented database.
    - Stores data in **BSON** (Binary JSON).
    - Collections (like tables) â†’ Documents (like rows).
- **Use cases:** Big data, real-time apps, flexible schemas.

### Key Terms:

- **Database** â†’ Container for collections.
- **Collection** â†’ Like a table.
- **Document** â†’ JSON-like object `{ key: value }`.
- **Field** â†’ Key-value inside document.
- **_id** â†’ Unique identifier (auto-created if not given).

---

## 2. Installation & Basic Commands

```bash
# Start MongoDB shell (mongosh)
mongosh

# Show databases
show dbs

# Create or switch to a database
use myDB

# Show collections
show collections

# Drop database
db.dropDatabase()

```

---

## 3. CRUD Operations

### Create

```jsx
db.students.insertOne({ name: "Alice", age: 21 })
db.students.insertMany([
  { name: "Bob", age: 22 },
  { name: "Charlie", age: 23 }
])

```

### Read

```jsx
db.students.find()                           // All documents
db.students.find({ age: 22 })                // Filter
db.students.find({ age: { $gt: 20 } })       // Greater than
db.students.find({}, { name: 1, _id: 0 })    // Projection

```

### Update

```jsx
db.students.updateOne({ name: "Alice" }, { $set: { age: 25 } })
db.students.updateMany({}, { $inc: { age: 1 } })  // Increase age by 1

```

### Delete

```jsx
db.students.deleteOne({ name: "Charlie" })
db.students.deleteMany({ age: { $lt: 20 } })

```

---

## 4. Query Operators

- **Comparison**
    - `$eq`, `$ne`, `$gt`, `$gte`, `$lt`, `$lte`, `$in`, `$nin`
- **Logical**
    - `$and`, `$or`, `$not`, `$nor`
- **Element**
    - `$exists`, `$type`
- **Evaluation**
    - `$regex`, `$expr`

Example:

```jsx
db.students.find({ $or: [{ age: { $lt: 21 } }, { age: { $gt: 25 } }] })

```

---

## 5. Indexes

- Improve query performance.

```jsx
db.students.createIndex({ name: 1 })       // Ascending
db.students.createIndex({ age: -1 })       // Descending
db.students.getIndexes()

```

---

## 6. Aggregation

- Powerful data analysis in MongoDB.

```jsx
db.orders.aggregate([
  { $match: { status: "delivered" } },
  { $group: { _id: "$customerId", total: { $sum: "$amount" } } },
  { $sort: { total: -1 } },
  { $limit: 5 }
])

```

**Pipeline stages:** `$match`, `$group`, `$sort`, `$project`, `$lookup`, `$unwind`.

---

## 7. Relationships

- MongoDB is **schema-less**, but supports relationships:
    - **Embedded documents** (denormalization) â†’ Fast reads.
    - **References** (normalization) â†’ Flexible, like foreign keys.

Example:

```jsx
// Embedded
{ name: "Alice", address: { city: "Delhi", pin: 110001 } }

// Reference
{ name: "Alice", addressId: ObjectId("...") }

```

---

## 8. Transactions

- Multi-document ACID transactions (since MongoDB 4.0).

```jsx
const session = db.getMongo().startSession()
session.startTransaction()
db.accounts.updateOne({ user: "A" }, { $inc: { balance: -100 } }, { session })
db.accounts.updateOne({ user: "B" }, { $inc: { balance: 100 } }, { session })
session.commitTransaction()
session.endSession()

```

---

## 9. Security & Users

```jsx
use admin
db.createUser({
  user: "manoj",
  pwd: "password",
  roles: ["readWrite", "dbAdmin"]
})

```

---

## 10. MongoDB vs SQL

| Feature | MongoDB (NoSQL) | MySQL (SQL) |
| --- | --- | --- |
| Data Format | BSON (JSON-like) | Tables (Rows & Columns) |
| Schema | Dynamic / Flexible | Fixed Schema |
| Joins | `$lookup` (less powerful) | Strong joins |
| Transactions | Supported (since 4.0) | Strong ACID |
| Best for | Big data, real-time apps | Structured data |

---

âœ… With this, you know **all core MongoDB concepts** for projects & interviews.

For your **college website project**, youâ€™ll mainly use:

- **CRUD**
- **Indexes** (for fast lookups)
- **Aggregation** (for reports/stats)
- **User authentication** (basic security)